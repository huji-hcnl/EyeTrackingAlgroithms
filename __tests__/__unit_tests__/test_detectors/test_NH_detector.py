import unittest
from GazeEvents.GazeEventTypeEnum import GazeEventTypeEnum
from Config.ScreenMonitor import ScreenMonitor
from Detectors.NHDetector import NHDetector
import numpy as np


class TestNHDetector(unittest.TestCase):
    def test_something(self):
        x_coordinates = [
            123.253200000000, 123.539500000000, 123.223000000000, 123.188300000000, 125.054000000000,
            125.918600000000, 125.431300000000, 124.569200000000, 124.613800000000, 123.489100000000,
            124.305000000000, 125.719600000000, 126.623600000000, 127.860900000000, 127.831000000000,
            127.701300000000, 127.292600000000, 126.712200000000, 127.854300000000, 127.001700000000,
            128.136100000000, 127.618600000000, 127.211500000000, 126.974000000000, 126.898400000000,
            127.788900000000, 128.623400000000, 128.660900000000, 128.075700000000, 128.306700000000,
            128.566000000000, 127.490700000000, 127.174600000000, 127.998600000000, 127.637200000000,
            128.279900000000, 127.893100000000, 128.099600000000, 127.661400000000, 126.466400000000,
            126.647300000000, 128.886400000000, 128.442900000000, 127.786300000000, 128.049800000000,
            127.221200000000, 126.564400000000, 126.349600000000, 126.510700000000, 125.990600000000,
            125.774200000000, 125.838200000000, 125.449100000000, 125.544100000000, 125.818500000000,
            125.222200000000, 125.615400000000, 124.708400000000, 124.450300000000, 124.667500000000,
            124.880100000000, 124.550200000000, 125.441800000000, 123.593500000000, 122.793600000000,
            122.533700000000, 123.188500000000, 122.814300000000, 124.328300000000, 123.208100000000,
            122.429400000000, 122.362200000000, 122.031000000000, 123.385800000000, 123.960100000000,
            124.686500000000, 123.710600000000, 123.640900000000, 123.822700000000, 123.758100000000,
            122.541300000000, 121.934900000000, 123.119600000000, 122.981900000000, 123.464500000000,
            124.120700000000, 123.873200000000, 123.275600000000, 123.597100000000, 122.411900000000,
            123.358600000000, 123.878900000000, 123.281400000000, 123.695500000000, 124.359700000000,
            122.870800000000, 123.576400000000, 123.925900000000, 124.449200000000, 124.696100000000,
            124.805800000000, 124.845600000000, 125.979200000000, 125.907700000000, 126.042100000000,
            127.074500000000, 125.395100000000, 125.288300000000, 125.003300000000, 125.323100000000,
            125.952900000000, 124.614200000000, 125.056900000000, 125.311700000000, 126.749800000000,
            127.035000000000, 125.482200000000, 125.624900000000, 126.937100000000, 127.604700000000,
            129.031000000000, 128.241900000000, 121.521000000000, 114.707100000000, 109.414100000000,
            100.505700000000, 94.9606000000000, 95.2231000000000, 95.9032000000000, 96.4991000000000,
            101.260200000000, 103.958200000000, 108.252700000000, 108.880100000000, 110.325400000000,
            112.820500000000
        ]

        y_coordinates = [
            22.6264000000000, 22.9064000000000, 21.9909000000000, 21.7740000000000, 21.1805000000000,
            20.1961000000000, 20.5499000000000, 21.0196000000000, 20.8048000000000, 21.6321000000000,
            21.4250000000000, 20.7885000000000, 20.5022000000000, 20.6528000000000, 20.8994000000000,
            20.4531000000000, 20.8445000000000, 21.0191000000000, 20.8744000000000, 22.3051000000000,
            22.8323000000000, 23.0786000000000, 22.5369000000000, 22.5987000000000, 22.1987000000000,
            21.8878000000000, 21.8493000000000, 23.0884000000000, 23.6769000000000, 23.8508000000000,
            24.0132, 24.3482, 23.9412, 23.5193, 23.2013, 23.4213, 23.9851, 24.6622, 25.0078, 25.36, 24.4158, 23.3798,
            23.8791, 24.3653, 24.3868, 24.7889, 24.4647, 24.3692, 24.9484, 25.9374, 25.9659, 25.8567, 25.8611, 25.3689,
            25.5578, 25.7861, 25.7442, 26.1332, 25.136, 25.4557, 25.2454, 25.5661, 24.6665, 24.7434, 24.212, 24.6171,
            24.0485, 24.6533, 24.6365, 25.3398, 25.7258, 25.3383, 25.0514, 25.4328, 25.2849, 25.6677, 26.0725, 25.9266,
            25.7147, 25.9783, 26.5856, 25.916, 26.0981, 26.357, 26.2925, 25.904, 25.7769, 26.0949, 26.1426, 25.5424,
            24.9307, 24.0501, 24.7839, 26.2419, 25.3828, 27.0641, 27.0974, 28.583, 28.6664, 27.7804, 27.6578, 28.3549,
            28.3984, 28.359, 28.3613, 28.6349, 29.1098, 29.9618, 30.1151, 30.8698, 31.218, 31.236, 31.147, 31.2614,
            30.806, 30.8423, 31.727, 32.2256, 32.0504, 32.7774, 34.7089, 37.0671, 46.309, 55.9716, 62.4481, 68.0248,
            75.4912, 79.0622, 81.2176, 83.191, 83.7656, 84.6713, 83.9343, 82.4546, 81.1652, 80.7981
        ]
        labels = [1] * 119
        labels2 = [
            2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
            3, 3, 3, 3, 3, 3
        ]
        labels.extend(labels2)

        timestamps = [i * 2 for i in range(len(labels))]
        candidates = [GazeEventTypeEnum.UNDEFINED] * len(labels)

        screen_monitor = ScreenMonitor(0.3800, 0.3000, 60, (1024, 768))
        pixel_size = screen_monitor.pixel_size

        detect_obj = NHDetector(sr=500, pixel_size=pixel_size, view_dist=0.6700, timestamps=timestamps)
        detect_obj._identify_gaze_event_candidates(np.array(x_coordinates), np.array(y_coordinates), candidates)
        # self.assertEqual(True, False)  # add assertion here


if __name__ == '__main__':
    unittest.main()
